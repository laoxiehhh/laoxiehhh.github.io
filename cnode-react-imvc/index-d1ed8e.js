webpackJsonp([0],{0:function(e,t,n){e.exports=n(1)},1:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(2),u=r(a),l=n(3),i=r(l),c=n(34),s=r(c),f=n(35),d=r(f);n.p=window.__PUBLIC_PATH__+"/";var p=window.__APP_SETTINGS__||{},h=function(e){return e["default"]||e},v=function(e){return"function"==typeof e?new Promise(e).then(h):h(e)},m={render:u["default"].render},_=s["default"].getFlatList(Array.isArray(d["default"])?d["default"]:Object.values(d["default"])),g=o({hashType:"hashbang",container:"#root"},p,{context:o({preload:{}},p.context,{isClient:!0,isServer:!1}),loader:v,routes:_,viewEngine:m}),y={};Array.from(document.querySelectorAll("[data-preload]")).forEach((function(e){var t=e.getAttribute("data-preload"),n=e.textContent||e.innerHTML;y[t]=n})),g.context.preload=y;var w=(0,i["default"])(g);w.start()},35:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=[{path:"/home",controller:n(36)},{path:"/login",controller:n(76)},{path:"/topic/:topicId",controller:n(80)},{path:"/user/:loginname",controller:n(90)},{path:"/add",controller:n(94)},{path:"/message",controller:n(98)},{path:"/about",controller:n(102)},{path:"*",controller:n(36)}]},36:function(e,t,n){e.exports=function(e){n.e(1,(function(t){e(n(37))}))}},38:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var u=t[o](a),l=u.value}catch(i){return void n(i)}return u.done?void e(l):Promise.resolve(l).then((function(e){r("next",e)}),(function(e){r("throw",e)}))}return r("next")})}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),d=function E(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:E(o,t,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},p=n(39),h=o(p),v=n(45),m=o(v),_=n(53),g=o(_),y=n(54),w=r(y),b=(function(e){function t(){var e,n,r,o;l(this,t);for(var a=arguments.length,u=Array(a),c=0;c<a;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.SSR=!0,r.preload={main:"/css/main.css"},r.handleOpenMenu=function(){var e=r.store.actions.OPEN_MENU;e()},r.handleCloseMenu=function(){var e=r.store.actions.CLOSE_MENU;e()},r.handleLogout=function(){r.removeCookie("accesstoken"),window.location.reload()},r.hideAlert=function(){var e=r.store.actions.UPDATE_ALERT_TEXT;e("")},r.showAlert=function(e){var t=r.store.actions.UPDATE_ALERT_TEXT;t(e),setTimeout(r.hideAlert,1e3)},r.showLoading=function(e){var t=r.store.actions.UPDATE_LOADING_TEXT;t(e)},r.hideLoading=function(){var e=r.store.actions.UPDATE_LOADING_TEXT;e("")},r.NeedLogin=!1,o=n,i(r,o)}return c(t,e),f(t,[{key:"getInitialState",value:(function(){function e(e){return t.apply(this,arguments)}var t=u(regeneratorRuntime.mark((function n(e){var t,r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getUserInfo();case 2:return t=n.sent,r=this.isLogin(),o=r,n.abrupt("return",s({},g["default"],{showAddButton:o,userInfo:t,isLogin:r},e));case 6:case"end":return n.stop()}}),n,this)})));return e})()},{key:"getFinalActions",value:function(e){return s({},e,w)}},{key:"getUserInfo",value:(function(){function e(){return t.apply(this,arguments)}var t=u(regeneratorRuntime.mark((function n(){var e,t,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=this.context,t=null,n.prev=2,!e.hasOwnProperty("userInfo")){n.next=7;break}t=e.userInfo,n.next=12;break;case 7:return r=this.cookie("accesstoken"),n.next=10,this.fetchUserInfo(r);case 10:t=n.sent,e.userInfo=t;case 12:n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](2),e.userInfo=null;case 17:return n.abrupt("return",t);case 18:case"end":return n.stop()}}),n,this,[[2,14]])})));return e})()},{key:"fetchUserInfo",value:(function(){function e(e){return t.apply(this,arguments)}var t=u(regeneratorRuntime.mark((function n(e){var t,r,o,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",null);case 2:return n.next=4,this.post("/accesstoken",{accesstoken:e});case 4:return t=n.sent,r=t.success,o=t.error_msg,u=a(t,["success","error_msg"]),n.abrupt("return",u);case 7:case"end":return n.stop()}}),n,this)})));return e})()},{key:"isLogin",value:function(){return!!this.context.userInfo}},{key:"get",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=s({},r,{credentials:"omit",headers:s({},r.headers,{"Content-Type":"application/x-www-form-urlencoded"})}),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"get",this).call(this,e,n,r)}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=s({},n,{credentials:"omit",method:"POST",headers:s({},n.headers,{"Content-Type":"application/x-www-form-urlencoded"}),body:m["default"].stringify(t)}),this.fetch(e,n)}},{key:"fetch",value:(function(){function e(e,t){return n.apply(this,arguments)}var n=u(regeneratorRuntime.mark((function r(e,n){var o,u,l,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetch",this).call(this,e,n);case 2:if(o=r.sent,u=o.success,l=o.error_msg,i=a(o,["success","error_msg"]),u){r.next=6;break}throw new Error(l);case 6:return r.abrupt("return",o);case 7:case"end":return r.stop()}}),r,this)})));return e})()},{key:"stateDidReuse",value:function(e){e.userInfo&&(this.context.userInfo=e.userInfo)}},{key:"shouldComponentCreate",value:(function(){function e(){return t.apply(this,arguments)}var t=u(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.NeedLogin||this.isLogin()){e.next=3;break}return this.redirect("/login?redirect="+this.location.raw),e.abrupt("return",!1);case 3:case"end":return e.stop()}}),n,this)})));return e})()},{key:"pageWillLeave",value:function(){this.showLoading("加载中……")}},{key:"pageDidBack",value:function(){this.hideLoading()}}]),t})(h["default"]);t["default"]=b},53:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={html:{title:"isomorphic-cnode",description:"an example of react-imvc usage",keywords:"react ssr isomorphic mvc"},pageTitle:"",userInfo:null,showMenu:!1,fixedHeader:!0,showAddButton:!1,messageCount:0,alertText:"",loadingText:""}},54:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.OPEN_MENU=function(e){return e.showMenu?e:n({},e,{showMenu:!0})},t.CLOSE_MENU=function(e){return e.showMenu?n({},e,{showMenu:!1}):e},t.UPDATE_ALERT_TEXT=function(e,t){return n({},e,{alertText:t})},t.UPDATE_LOADING_TEXT=function(e,t){return n({},e,{loadingText:t})},t.UPDATE_HTML_TITLE=function(e,t){var r=n({},e.html,{title:t});return n({},e,{html:r})}},69:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.children;return u["default"].createElement("div",{style:{height:"100%",backGround:"#fff"}},u["default"].createElement(l.Style,{name:"main"}),u["default"].createElement(c["default"],null),t,u["default"].createElement(f["default"],null),u["default"].createElement(p["default"],null),u["default"].createElement(v["default"],null))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(2),u=r(a),l=n(58),i=n(70),c=r(i),s=n(73),f=r(s),d=n(74),p=r(d),h=n(75),v=r(h)},70:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.showMenu,n=e.fixedHeader,r=e.showAddButton,o=e.messageCount,i=e.pageTitle,s=e.onCloseMenu,d=e.onOpenMenu,p=(0,f["default"])({show:t&&n,"fix-header":n,"no-fix":!n});return c["default"].createElement("div",null,c["default"].createElement(a,{"if":t&&n,onClick:s}),c["default"].createElement("header",{id:"hd",className:p},c["default"].createElement("div",{className:"nv-toolbar"},c["default"].createElement(u,{"if":n,onClick:d}),c["default"].createElement("span",null,i),c["default"].createElement(l,{messageCount:o,showAddButton:r}))),c["default"].createElement(m["default"],null))}function a(e){return e["if"]?c["default"].createElement("div",{className:"page-cover",onClick:e.onClick}):null}function u(e){return e["if"]?c["default"].createElement("div",{className:"toolbar-nav",onClick:e.onClick}):null}function l(e){var t=e.messageCount,n=e.showAddButton;return t>0?c["default"].createElement("i",{className:"num"},t):n?c["default"].createElement(d.Link,{as:"i",className:"iconfont add-icon",to:"/add"},""):null}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),c=r(i),s=n(61),f=r(s),d=n(58),p=n(62),h=r(p),v=n(71),m=r(v),_=(0,h["default"])((function(e){var t=e.state,n=e.handlers;return{fixedHeader:t.fixedHeader,showMenu:t.showMenu,pageTitle:t.pageTitle,messageCount:t.messageCount,showAddButton:t.showAddButton,onCloseMenu:n.handleCloseMenu,onOpenMenu:n.handleOpenMenu}}));t["default"]=_(o)},71:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e){var t=(0,f["default"])({"nav-list":!0,show:e.showMenu});return c["default"].createElement("section",{id:"sideBar",className:t,onClick:e.onClose},c["default"].createElement(m["default"],null),c["default"].createElement("ul",{className:"list-ul"},c["default"].createElement(y,{className:"icon-quanbu iconfont",to:"/list?tab=all"},"全部"),c["default"].createElement(y,{className:"icon-hao iconfont",to:"/list?tab=good"},"精华"),c["default"].createElement(y,{className:"icon-fenxiang iconfont",to:"/list?tab=share"},"分享"),c["default"].createElement(y,{className:"icon-wenda iconfont",to:"/list?tab=ask"},"问答"),c["default"].createElement(y,{className:"icon-zhaopin iconfont",to:"/list?tab=job"},"招聘"),c["default"].createElement(y,{className:"icon-xiaoxi iconfont line",to:"/message"},"消息"),c["default"].createElement(y,{className:"icon-about iconfont",to:"/about"},"关于")))}function u(e){if(e.to===e.current){var t=(e.to,e.current,o(e,["to","current"]));return c["default"].createElement("li",t)}var n=(e.current,o(e,["current"]));return c["default"].createElement(d.Link,l({as:"li"},n))}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(2),c=r(i),s=n(61),f=r(s),d=n(58),p=n(62),h=r(p),v=n(72),m=r(v),_=(0,h["default"])((function(e){var t=e.state,n=e.handlers;return{showMenu:t.showMenu,onClose:n.handleCloseMenu}}));t["default"]=_(a);var g=(0,h["default"])((function(e){var t=e.state;return{current:t.location}})),y=g(u)},72:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.location,n=e.userInfo,r=e.user,o=e.onLogout,i="/user/:loginname"===t.pattern&&n&&r&&n.loginname===r.loginname;return c["default"].createElement("div",{className:"user-info"},c["default"].createElement(l,{"if":!i&&n,info:n}),c["default"].createElement(a,{"if":!i&&!n,redirect:t.raw}),c["default"].createElement(u,{"if":i,onLogout:o}))}function a(e){return e["if"]?c["default"].createElement("ul",{className:"login-no"},c["default"].createElement(s.Link,{as:"li",className:"login",to:"/login?redirect="+e.redirect},"登录")):null}function u(e){return e["if"]?c["default"].createElement("ul",{className:"login-no"},c["default"].createElement("li",{className:"login",onClick:e.onLogout},"退出")):null}function l(e){if(!e["if"])return null;var t=e.info,n=t.loginname,r=t.avatar_url;return c["default"].createElement(s.Link,{as:"div",to:"/user/"+n,className:"login-yes"},c["default"].createElement("div",{className:"avertar"},r&&c["default"].createElement("img",{src:r})),c["default"].createElement("div",{className:"info"},n&&c["default"].createElement("p",null,n)))}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),c=r(i),s=n(58),f=n(62),d=r(f),p=(0,d["default"])((function(e){var t=e.state,n=e.handlers;return{location:t.location,userInfo:t.userInfo,user:t.user,onLogout:n.handleLogout}}));t["default"]=p(o)},73:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),i=n(2),c=r(i),s=(function(e){function t(){var e,n,r,u;o(this,t);for(var l=arguments.length,i=Array(l),c=0;c<l;c++)i[c]=arguments[c];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={shouldShow:!1},r.handleGoToTop=function(){window.scrollTo(0,0)},r.handleScroll=function(){var e=window,t=e.scrollY,n=r.state.shouldShow;t>100?n||r.setState({shouldShow:!0}):n&&r.setState({shouldShow:!1})},u=n,a(r,u)}return u(t,e),l(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){return this.state.shouldShow?c["default"].createElement("div",{className:"iconfont icon-top",onClick:this.handleGoToTop},""):null}}]),t})(c["default"].Component);t["default"]=s},74:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e.content?u["default"].createElement("div",{id:"wxAlert",className:"wx_loading"},u["default"].createElement("div",{id:"wx_alert_inner",className:"wx_alert_inner"},e.content)):null}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),u=r(a),l=n(62),i=r(l),c=(0,i["default"])((function(e){var t=e.state;return{content:t.alertText}}));t["default"]=c(o)},75:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e.content?u["default"].createElement("div",{id:"wxloading",className:"wx_loading"},u["default"].createElement("div",{className:"wx_loading_inner"},u["default"].createElement("i",{className:"wx_loading_icon"}),e.content)):null}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),u=r(a),l=n(62),i=r(l),c=(0,i["default"])((function(e){var t=e.state;return{content:t.loadingText}}));t["default"]=c(o)},76:function(e,t,n){e.exports=function(e){n.e(2,(function(t){e(n(77))}))}},80:function(e,t,n){e.exports=function(e){n.e(3,(function(t){e(n(81))}))}},90:function(e,t,n){e.exports=function(e){n.e(4,(function(t){e(n(91))}))}},94:function(e,t,n){e.exports=function(e){n.e(5,(function(t){e(n(95))}))}},98:function(e,t,n){e.exports=function(e){n.e(6,(function(t){e(n(99))}))}},102:function(e,t,n){e.exports=function(e){n.e(7,(function(t){e(n(103))}))}}});