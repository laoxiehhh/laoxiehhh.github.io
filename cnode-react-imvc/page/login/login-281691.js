webpackJsonp([2],{77:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var u=t[o](a),i=u.value}catch(c){return void n(c)}return u.done?void e(i):Promise.resolve(i).then((function(e){r("next",e)}),(function(e){r("throw",e)}))}return r("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),l=n(38),s=r(l),f=n(78),d=r(f),p=n(79),h=r(p),b=(function(e){function t(){var e,n,r,i,c=this;a(this,t);for(var l=arguments.length,s=Array(l),f=0;f<l;f++)s[f]=arguments[f];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.View=d["default"],r.Model=h["default"],r.handleLogin=o(regeneratorRuntime.mark((function p(){var e,t,n,o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=r.store.getState(),t=e.token,n=e.location,t&&36===t.length){a.next=4;break}return r.showAlert("令牌格式错误, 应为36位UUID字符串"),a.abrupt("return");case 4:return r.showLoading("登陆中..."),a.prev=5,a.next=8,r.fetchUserInfo(t);case 8:if(o=a.sent){a.next=11;break}throw new Error("登录失败，请重试!");case 11:r.cookie("accesstoken",t),window.location.reload(),a.next=18;break;case 15:a.prev=15,a.t0=a["catch"](5),r.showAlert("error.message");case 18:r.hideLoading();case 19:case"end":return a.stop()}}),p,c,[[5,15]])}))),i=n,u(r,i)}return i(t,e),c(t,[{key:"shouldComponentCreate",value:function(){var e=this.context,t=this.location;if(this.isLogin()){var n=e.userInfo,r=t.query.redirect;return r||(r=e.basename+"/user/"+n.loginname),this.redirect(r),!1}}}]),t})(s["default"]);t["default"]=b},78:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.handlers,n=t.handleLogin;return u["default"].createElement(c["default"],null,u["default"].createElement("section",{className:"page-body"},u["default"].createElement("div",{className:"label"},u["default"].createElement(l.Input,{name:"token",className:"txt",type:"text",placeholder:"Access Token",maxLength:"36"})),u["default"].createElement("div",{className:"label"},u["default"].createElement("button",{className:"button",onClick:n},"登录"))))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(2),u=r(a),i=n(69),c=r(i),l=n(58)},79:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.initialState={pageTitle:"登录",token:""}}});