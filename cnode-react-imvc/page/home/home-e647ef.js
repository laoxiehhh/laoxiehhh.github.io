webpackJsonp([1],{37:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var u=t[a](o),i=u.value}catch(c){return void r(c)}return u.done?void e(i):Promise.resolve(i).then((function(e){n("next",e)}),(function(e){n("throw",e)}))}return n("next")})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=(function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})(),f=function O(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:O(a,t,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},p=r(38),d=a(p),h=r(55),v=n(h),b=r(56),g=n(b),m=r(57),y=a(m),_=(function(e){function t(){var e,r,n,a,c=this;u(this,t);for(var l=arguments.length,f=Array(l),p=0;p<l;p++)f[p]=arguments[p];return r=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(f))),n.KeepAlive=!0,n.View=y["default"],n.Model=g,n.isFetching=!1,n.handleScroll=o(regeneratorRuntime.mark((function d(){var e,t,r,a,o,u,i;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=n.store.actions.SCROLL_TO_BOTTOM,t=n.store.getState(),!n.isFetching&&!t.showMenu){c.next=4;break}return c.abrupt("return");case 4:if(r=window.innerHeight+window.scrollY,a=document.body.scrollHeight||document.documentElement.scrollHeight,!(a-r<=400)){c.next=15;break}return o=s({},t.searchParams,{page:t.searchParams.page+1}),n.isFetching=!0,c.next=11,n.get("/topics",o);case 11:u=c.sent,i=u.data,e({data:i,searchParams:o}),n.isFetching=!1;case 15:case"end":return c.stop()}}),d,c)}))),a=r,i(n,a)}return c(t,e),l(t,[{key:"getInitialState",value:(function(){function e(e){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark((function n(e){var r,a,o,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getInitialState",this).call(this,e);case 2:return r=n.sent,a=r.location.query,o=s({},r.searchParams),u=r.pageTitle,a.tab&&(o.tab=a.tab,u=v.getTitleByTab(a.tab)),n.abrupt("return",s({},r,{pageTitle:u,searchParams:o}));case 8:case"end":return n.stop()}}),n,this)})));return e})()},{key:"componentWillCreate",value:(function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark((function r(){var e,t,n,a,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.store.actions.COMPONENT_WILL_CREATE,t=this.store.getState(),n=t.searchParams,r.next=5,this.get("/topics",n);case 5:a=r.sent,o=a.data,e(o);case 8:case"end":return r.stop()}}),r,this)})));return e})()},{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}}]),t})(d["default"]);t["default"]=_},55:function(e,t){"use strict";function r(e,t,r){var n="";if(r)n="top";else if(t)n="good";else switch(e){case"share":n="share";break;case"ask":n="ask";break;case"job":n="job";break;default:n="default"}return n}function n(e){var t="";switch(e){case"share":t="分享";break;case"ask":t="问答";break;case"job":t="招聘";break;case"good":t="精华";break;default:t="全部"}return t}function a(e,t,r){var n="";if(r)n="置顶";else if(t)n="精华";else switch(e){case"share":n="分享";break;case"ask":n="问答";break;case"job":n="招聘";break;default:n="暂无"}return n}function o(e,t){return t?s(new Date-new Date(e)):c(new Date(e),"yyyy-MM-dd hh:mm")}function u(e){if(!e)return[];var t=[/```.+?```/g,/^```[\s\S]+?^```/gm,/`[\s\S]+?`/g,/^    .*/gm,/\b\S*?@[^\s]*?\..+?\b/g,/\[@.+?\]\(\/.+?\)/g];t.forEach((function(t){e=e.replace(t,"")}));var r=e.match(/@[a-z0-9\-_]+\b/gim),n=[],a={};if(r)for(var o=0,u=r.length;o<u;o++){var i=r[o];i=i.slice(1),a.hasOwnProperty(i)||(n.push(i),a[i]=!0)}return n}function i(e){for(var t=u(e),r=0,n=t.length;r<n;r++){var a=t[r];e=e.replace(new RegExp("@"+a+"\\b(?!\\])","g"),"[@"+a+"](/user/"+a+")")}return e}function c(e,t){var r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in r)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?r[n]:("00"+r[n]).substr((""+r[n]).length)));return t}function s(e){var t=parseFloat(e)/1e3,r="";return null!=t&&""!=t&&(r=t>60&&t<3600?parseInt(t/60)+" 分钟前":t>=3600&&t<86400?parseInt(t/3600)+" 小时前":t>=86400&&t<2592e3?parseInt(t/86400)+" 天前":t>=2592e3&&t<31536e3?parseInt(t/2592e3)+" 个月前":t>=31536e3?parseInt(t/31536e3)+" 年前":parseInt(t)+" 秒前"),r}Object.defineProperty(t,"__esModule",{value:!0}),t.getTabClassName=r,t.getTitleByTab=n,t.getTabStr=a,t.getLastTimeStr=o,t.fetchUsers=u,t.linkUsers=i,t.fmtDate=c,t.MillisecondToDate=s},56:function(e,t){"use strict";function r(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=(t.initialState={pageTitle:"首页",topics:[],searchParams:{page:1,limit:20,tab:"all",mdrender:!0}},t.COMPONENT_WILL_CREATE=function(e,t){return o(e,t)},t.SCROLL_TO_BOTTOM=function(e,t){var r=t.data,n=t.searchParams;return e=o(e,r),e=a(e,n)},t.UPDATE_SEARCH_PARAMS=function(e,t){return n({},e,{searchParams:t})}),o=function(e,t){var a=t.map((function(e){var t=(e.content,r(e,["content"]));return t}));return n({},e,{topics:e.topics.concat(a)})};t.ADD_TOPICS=o},57:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.state;e.handlers;return s["default"].createElement(d["default"],null,s["default"].createElement("section",{id:"page"},s["default"].createElement("ul",{className:"posts-list"},t.topics.map((function(e){return s["default"].createElement(b,i({},e,{key:e.id}))})))))}function u(e){var t=e.id,r=e.title,n=e.good,a=e.top,o=e.tab,u=e.author,i=e.reply_count,c=e.create_at,f=e.last_reply_at,p=e.visit_count;return s["default"].createElement(l.Link,{as:"li",to:"/topic/"+t},s["default"].createElement("h3",{className:v.getTabClassName(o,n,a),title:v.getTabStr(o,n,a)},r),s["default"].createElement("div",{className:"content"},s["default"].createElement("img",{className:"avatar",src:u.avatar_url}),s["default"].createElement("div",{className:"info"},s["default"].createElement("p",null,s["default"].createElement("span",{className:"name"},u.loginname),i>0&&s["default"].createElement("span",{className:"status"},s["default"].createElement("b",null,i),"/",p)),s["default"].createElement("p",null,s["default"].createElement("time",null,v.getLastTimeStr(c,!0)),s["default"].createElement("time",null,v.getLastTimeStr(f,!0))))))}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t["default"]=o;var c=r(2),s=a(c),l=r(58),f=r(68),p=r(69),d=a(p),h=r(55),v=n(h),b=(0,f.purify)()(u)},68:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.staticify=t.purify=void 0;var i=(function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})(),c=r(2),s=n(c);t.purify=function(){return function(e){return (function(t){function r(){return a(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return u(r,t),i(r,[{key:"render",value:function(){return s["default"].createElement(e,this.props)}}]),r})(s["default"].PureComponent)}},t.staticify=function(){return function(e){return (function(t){function r(){return a(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return u(r,t),i(r,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return s["default"].createElement(e,this.props)}}]),r})(s["default"].Component)}}}});