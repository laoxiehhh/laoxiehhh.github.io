webpackJsonp([5],{95:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var c=t[a](o),l=c.value}catch(u){return void n(u)}return c.done?void e(l):Promise.resolve(l).then((function(e){r("next",e)}),(function(e){r("throw",e)}))}return r("next")})}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(38),s=a(i),f=n(96),d=a(f),p=n(97),h=r(p),m=(function(e){function t(){var e,n,r,a,u=this;c(this,t);for(var i=arguments.length,s=Array(i),f=0;f<i;f++)s[f]=arguments[f];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.KeepAlive=!0,r.NeedLogin=!0,r.View=d["default"],r.Model=h,r.handlePublish=o(regeneratorRuntime.mark((function p(){var e,t,n,a,o,c,l,i,s;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(e=r.store.getState(),t=r.cookie("accesstoken"),n=e.title,a=e.tab,o=e.content,!(n.length<10)){u.next=6;break}return r.showAlert("标题不能少于 10 字"),u.abrupt("return");case 6:if(0!==o.length){u.next=9;break}return r.showAlert("正文不能为空"),u.abrupt("return");case 9:return c={accesstoken:t,title:n,tab:a,content:o},r.showLoading("发布中……"),u.prev=11,u.next=14,r.post("/topics",c);case 14:l=u.sent,i=l.topic_id,s="/topic/"+i,r.removeFromCache(),r.history.replace(s),u.next=24;break;case 21:u.prev=21,u.t0=u["catch"](11),r.showAlert(u.t0.message);case 24:r.hideLoading();case 25:case"end":return u.stop()}}),p,u,[[11,21]])}))),a=n,l(r,a)}return u(t,e),t})(s["default"]);t["default"]=m},96:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=(e.state,e.handlers);return l["default"].createElement(f["default"],null,l["default"].createElement("div",{className:"add-container"},l["default"].createElement("div",{className:"line"},"选择分类：",l["default"].createElement(o,null)," ",l["default"].createElement("a",{className:"add-btn",onClick:t.handlePublish},"发布")),l["default"].createElement("div",{className:"line"},l["default"].createElement(i.Input,{name:"title",className:"add-title",placeholder:"标题，字数10字以上",maxLength:"100"})),l["default"].createElement(i.Input,{as:"textarea",name:"content",className:"add-content",placeholder:"回复支持Markdown语法,请注意标记代码",rows:"35"})))}function o(){return l["default"].createElement(i.Input,{as:"select",name:"tab",className:"add-tab"},d.map((function(e){var t=e.type,n=e.text;return l["default"].createElement("option",{value:t,key:t},n)})))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var c=n(2),l=r(c),u=n(61),i=(r(u),n(58)),s=n(69),f=r(s),d=[{type:"share",text:"分享"},{type:"ask",text:"问答"},{type:"job",text:"招聘"}]},97:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.initialState={pageTitle:"添加",showAddButton:!1,tab:"share",title:"",content:"",errorTypeList:[]}}});